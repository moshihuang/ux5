<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta name="format-detection" content="telephone=no">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <title>CTBC</title>
  <link rel="stylesheet" href="../../../../inc/bundle_lib.css">
  <link rel="stylesheet" href="../../../../inc/bundle_base.css">
  <link rel="stylesheet" href="../../../../ctbc_css/ctbc.css">
  <link rel="stylesheet" href="../../../../ctbc_css/virtualKeyboard.css">
  <link rel="stylesheet" href="../../../../index.css">
  <script type="text/javascript" src="../../../../inc/bundle_lib.js"></script>
  <script type="text/javascript" src="../../../../inc/bundle_base.js"></script>
  <style> 
    /* vi-tab-group radiobtn切換*/
    .vi-tab-group{
      display: flex;
    }
    .vi-tab-group .vi-radio{
      width: 50%;
      position: relative;
    }
    .vi-tab-group .vi-radio-mark{
      width: 100%;
      height: 42px;
      background: #f7f7f7;
      border: 1px solid #DAE1E5;
    }
    .vi-tab-group .vi-radio-txt{
      position: absolute;
      display: flex;
      justify-content: center;
      align-items: center;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
    .vi-tab-group .vi-radio .vi-radio-mark{
      border-radius: 0;
      overflow: hidden;
    }
    .vi-tab-group .vi-radio:first-child .vi-radio-mark{
      border-radius: 6px 0 0 6px;
    }
    .vi-tab-group .vi-radio:last-child .vi-radio-mark{
      border-radius: 0 6px 6px 0;
    }
    .vi-radio input:checked + .vi-radio-mark:after{
      width: 100%;
      height: 100%;
      background: #EFFFFE;
      border-radius: 0;
    }
    .vi-radio input[type="radio"]:checked + .vi-radio-mark + .vi-radio-txt{
      color: #009891;
      font-weight: 900;
    }
    /* scan icon */
    .vi-icon-scan{
      background-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE4IDhWNUMxOCAzLjg5NTQzIDE3LjEwNDYgMyAxNiAzSDhDNi44OTU0MyAzIDYgMy44OTU0MyA2IDVWOCIgc3Ryb2tlPSIjMDA5ODkxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBkPSJNNiAxNlYxOUM2IDIwLjEwNDYgNi44OTU0MyAyMSA4IDIxSDE2QzE3LjEwNDYgMjEgMTggMjAuMTA0NiAxOCAxOVYxNiIgc3Ryb2tlPSIjMDA5ODkxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8bGluZSB4MT0iMiIgeTE9IjEyIiB4Mj0iMjIiIHkyPSIxMiIgc3Ryb2tlPSIjMDA5ODkxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K");
    }
    /* search icon*/
    .vi-icon-search{
      background-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAuNCIgY3k9IjkuNCIgcj0iNy40IiBmaWxsPSIjRUZGRkZFIiBzdHJva2U9IiMwMDk4OTEiIHN0cm9rZS13aWR0aD0iMiIvPgo8bWFzayBpZD0ibWFzazBfMTQ1XzI3MjQ3IiBzdHlsZT0ibWFzay10eXBlOmFscGhhIiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSI0IiB5PSIzIiB3aWR0aD0iMTMiIGhlaWdodD0iMTMiPgo8Y2lyY2xlIGN4PSIxMC4zOTk2IiBjeT0iOS40MDAxIiByPSI2LjMiIGZpbGw9IiNFRkZGRkUiLz4KPC9tYXNrPgo8ZyBtYXNrPSJ1cmwoI21hc2swXzE0NV8yNzI0NykiPgo8Y2lyY2xlIGN4PSIxNi42OTk2IiBjeT0iMTEuNDk5OSIgcj0iNy4zNSIgZmlsbD0iI0M5RUJFOSIvPgo8L2c+CjxsaW5lIHgxPSIxNC45NjQiIHkxPSIxNS43MDAyIiB4Mj0iMTkuODQ5OCIgeTI9IjIwLjU4NiIgc3Ryb2tlPSIjMDA5ODkxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K");
    }
    /* vi-scrollbar-list */
    .vi-scrollbar-list{
      position: fixed;
      z-index: 2;
      right: 23px;
      top: 219px;
    }
    /* noScroll */
    .noScroll{
      overflow: hidden;
    }
    /* vi-scrollbar-ball */
    .vi-scrillbar-ball{
      background: #d9d9d9;
      position: fixed;
      width: 34px;
      height: 34px;
      border-radius: 100%;
      top: 219px;
      right: 48px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
</head>
<!-- 以上供 dev 快速瀏覽樣式，開發時請拉掉 -->


<!-- if scroll, add .vi-page-header-fix -->
<body class="vi-bg-mint">
  
  <!-- demo 用 header 開發時請拉掉 -->
  <!-- import { HeaderComponent } from 'app/mb/header/header.component' -->
  <!-- search <ng-template #headerLinks> -->
  <header class="">
    <div class="container-header vi-page-header-normal">
      <div class="vi-page-header-lt">
        <button class="vi-btn" ontouchstart="">
          <span class="vi-icon vi-icon-base icon-page-back"></span>
        </button>
      </div>
      <div class="vi-page-header-ct">
        <h1 class="vi-page-title">臺幣轉帳</h1>
      </div>
      <div class="vi-page-header-rt">
        <a class="btn vi-txt-btn vi-txt-body-bold vi-txt-g500" href="">預約記錄</a>
      </div>
    </div>
  </header>
  <!-- demo 用 header 開發時請拉掉 -->


  <!-- EBMW content from here -->
  <div class="body-wrap vi-bg-mint">
    
    <div class="page-gradient"></div>
    
    <div class="main_container vi-has-foot-btn">
      
      <div class="status-wrap pad_top24">
        
        <div class="vi-container">
          <div class="vi-card">
            <div class="vi-card-body pad_top16 pad_btm8">

              <!-- 我的帳號 -->
              <div id="trigger-select-account" class="vi-form-group vi-for-select">
                <!-- 只有一個帳號時加入 disabled -->
                <div class="vi-input-group">
                  <span class="title large-title">我的帳號</span>
                    <input placeholder="請選擇帳號" type="text" readonly="readonly"> 
                  <div class="fake-input flex-column hide">
                    <div class="dis-flex mb4">
                      <span class="vi-txt-body-bold vi-txt-b600">活期存款</span>
                    </div>
                    <div class="dis-flex vi-txt-body">0000251300001234</div>
                  </div>
                </div>
                <!-- <div class="vi-form-error"></div> -->
              </div>

              <!-- 銀行代碼 & 常用帳號 -->
              <div class="mt16 mb8 rt">
                <a class="btn vi-txt-btn vi-txt-body-bold vi-txt-g500" id="target-bankcode">銀行代碼</a>
                <span class="vi-dashed-divider-vertical ml12 mr16"></span>
                <a class="btn vi-txt-btn vi-txt-body-bold vi-txt-g500">常用帳號</a>
              </div>

              <!-- 對方帳號 -->
              <div class="vi-input-group">
                <span class="title large-title">對方帳號</span>
                <input type="text" placeholder="銀行代碼\帳號\暱稱">
                <span class="vi-icon vi-icon-base vi-icon-scan"></span>
              </div> 

              <!-- 金額 -->
              <div class="vi-input-group mt16">
                <span class="title large-title">金額</span>
                <input type="text" placeholder="請輸入">
              </div> 

              <!-- 分隔線 -->
              <div class="vi-dashed-divider"></div>

              <!-- 分頁按鈕(radio btn)  -->
              <div class="vi-tab-group mb8">
                <label class="vi-radio">
                  <input type="radio" name="tab" value="tabRightNow" checked>
                  <span class="vi-radio-mark"></span>
                  <span class="vi-radio-txt">立即</span>
                </label>
                <label class="vi-radio">
                  <input type="radio" name="tab" value="tabReserve">
                  <span class="vi-radio-mark"></span>
                  <span class="vi-radio-txt">預約</span>
                </label>
              </div>
              
              <!-- 註記 --> 
              <div class="vi-form-group">
                <div class="vi-input-group">
                  <span class="title large-title">註記</span>
                  <input placeholder="非必填" type="text">
                </div>

                <!-- 勾選 -->
                <div class="dis-flex align-center mt8">
                  <label class="vi-checkbox">
                    <input type="checkbox">
                    <span class="vi-checkbox-mark"></span>
                    <span class="vi-checkbox-txt">顯示於雙方明細</span>
                  </label>
                  <div class="vi-form-info ml-auto pad_0">0/7</div>
                </div>
              </div>
            </div>
          </div>

          <!-- 下一步 -->
          <div class="vi-btn-group mt24 mb16">
            <a class="btn insight vi-btn vi-btn-primary" href="#">下一步</a>
          </div>

          <!-- 提示文字 -->
          <div class="vi-txt-body ct">
            不需填寫帳號也能轉帳！試試<a class="vi-txt-body-bold vi-txt-g500 ml5" href="#">方便轉</a>
          </div>
          
        </div>
          
        <div class="vi-container mt16">

          <!-- 注意事項 -->
          <div class="mb32">
            <div class="vi-note-accordion">
              <div class="vi-card-header flex-justify-between collapsed" data-toggle="collapse" href="#collapseNote" role="button" aria-expanded="false">
                <div class="forAEM base-style break-word mr4">
                  注意事項
                </div>
                <span class="vi-icon vi-icon-xs icon-arrow-up-green"></span>
              </div>
              <div class="panel-collapse collapse" id="collapseNote" role="tabpanel" aria-expanded="false" style="height: 0px;">
                <div class="vi-card-body forAEM base-style break-word">
                  <ol class="vi-list-ol pad_0">
                    <li>填寫註記時勾選「顯示於雙方明細」，內容將會同步顯示於對方交易明細，但若對方銀行非中國信託，則顯示內容依對方銀行規定為準。</li>
                  </ol>
                </div>
              </div>
            </div>
          </div>

          <div id="trigger-exit" class="vi-txt-g500 mb16">-&gt; 離開資料確認頁</div>

        </div>
      </div>   
    </div>
  </div>
  <!-- main_container -->
</body>
<!-- body-wrap -->

</html>

<!-- id 是 demo 用的，開發請拉掉 -->
<div id="trigger-exit-modal" class="vi-modal">
  <div class="vi-modal-backdrop"></div>
  <div class="popup">
    <div class="popup-header">
      <div class="popup-header-ct">
        <span class="popup-title">是否要離開此頁</span>
      </div>
    </div>
    <div class="popup-body">
      <div class="vi-txt-body vi-txt-b600">離開此頁資料會清除，是否確認要前往方便轉功能？</div>
    </div>
    <div class="popup-footer">
      <div class="vi-btn-group">
        <button class="vi-btn vi-btn-secondary">回轉帳頁</button>
        <button class="vi-btn vi-btn-primary">前往方便轉</button>
      </div>
    </div>
  </div>
</div>

<!-- 超人卡片 現有版型 這裡僅示意 -->
<!-- id 是 demo 用的，開發請拉掉 -->
<div id="target-account-supercard" class="vi-modal hide">
  <div class="vi-modal-backdrop" data-dismiss="modal"></div>
    <div class="super-card">
      <div class="super-card-header">
        <div class="super-card-header-lt"></div>
        <div class="super-card-header-ct">
          <div class="super-card-title">選擇扣款帳號</div>
        </div>
        <div class="super-card-header-rt">
          <button class="vi-modal-close" data-dismiss="modal"></button>
        </div>
      </div>
      <div class="super-card-body">
        <div class="rt vi-txt-body mb4">可用餘額</div>
        <ul class="vi-list vi-list-px8 vi-list-py8 vi-list-noline vi-list-bg-gray super-card-select-account">
          <!-- 需綠底加上 active -->
          <a class="vi-list-item" href="">
            <div class="dis-flex flex-justify-between w-100">
              <div class="vi-list-lt">
                <div class="dis-flex align-items-center mb8">
                  <span class="vi-txt-body-bold vi-txt-b600">活期存款</span>
                </div>
              </div>
              <div class="vi-list-rt">
                <div class="vi-txt-body-bold"></div>
              </div>
            </div>
            <div class="dis-flex flex-justify-between w-100">
              <div class="vi-list-lt">
                <div class="vi-txt-body">0000251300001234</div>
              </div>
              <div class="vi-list-rt">
                <div class="vi-txt-body-bold">
                  <!-- <span class="currency mr4">USD</span> -->
                  <span>6,253</span>
                </div>
              </div>
            </div>
          </a>
          <a class="vi-list-item" href="">
            <div class="dis-flex flex-justify-between w-100">
              <div class="vi-list-lt">
                <div class="dis-flex align-items-center mb8">
                  <span class="vi-txt-body-bold vi-txt-b600">My Way 數位</span>
                </div>
              </div>
              <div class="vi-list-rt">
                <div class="vi-txt-body-bold"></div>
              </div>
            </div>
            <div class="dis-flex flex-justify-between w-100">
              <div class="vi-list-lt">
                <div class="vi-txt-body">0000498827784920</div>
              </div>
              <div class="vi-list-rt">
                <div class="vi-txt-body-bold">
                  <span>100,000,000</span>
                </div>
              </div>
            </div>
          </a>
        </ul>
      </div>
    </div>
</div>

<!-- 超人卡片 現有版型 這裡僅示意 -->
<!-- id 是 demo 用的，開發請拉掉 -->
<div id="target-bankcode-supercard" class="vi-modal hide">
  <div class="vi-modal-backdrop" data-dismiss="modal"></div>
    <div class="super-card">
      <div class="super-card-header">
        <div class="super-card-header-lt"></div>
        <div class="super-card-header-ct">
          <div class="super-card-title">選擇對象</div>
        </div>
        <div class="super-card-header-rt">
          <button class="vi-modal-close" data-dismiss="modal"></button>
        </div>
      </div>

      <div class="super-card-body">
        <div class="ml-16 mr-16">
          <!-- 現有版型, 但這裡預設要有 fixed, 請開發再確認是否做的到 -->
          <div class="nav-scroll fixed-top fixed-position-tab-nav-supercard">
            <ul class="vi-tab js_anchor_tab">
              <li class="vi-tab-item active">
                <a class="vi-tab-link" href="#tab1-1" data-toggle="tab">
                  <span>銀行代碼</span>
                </a>
              </li>
              <li class="vi-tab-item">
                <a class="vi-tab-link" href="#tab1-2" data-toggle="tab">
                  <span>約定/常用</span>
                </a>
              </li>
              <li class="vi-tab-item">
                <a class="vi-tab-link" href="#tab1-3" data-toggle="tab">
                  <span>最近轉帳</span>
                </a>
              </li>
            </ul>
          </div>

          <div class="tab-content pad_top24 pad_btm12 fixed-position-tab-content-supercard">
            <!-- 固定 scrollbar -->
            <ul class="vi-scrollbar-list ct"> 
              <li class="vi-txt-b400 vi-txt-callout">熱</li>
              <li class="vi-txt-b400 vi-txt-callout pady_4">0</li>
              <li class="vi-txt-b400 vi-txt-callout pady_4">1</li>
              <li class="vi-txt-b400 vi-txt-callout pady_4">2</li>
              <li class="vi-txt-b400 vi-txt-callout pady_4">3</li>
              <li class="vi-txt-b400 vi-txt-callout pady_4">4</li>
              <li class="vi-txt-b400 vi-txt-callout pady_4">5</li>
              <li class="vi-txt-b400 vi-txt-callout pady_4">6</li>
              <li class="vi-txt-b400 vi-txt-callout pady_4">7</li>
              <li class="vi-txt-b400 vi-txt-callout pady_4">8</li>
              <li class="vi-txt-b400 vi-txt-callout pady_4">9</li>
            </ul>
            <div class="vi-scrillbar-ball hide">
              <p class="vi-txt-callout vi-txt-white"></p>
            </div>
            <!-- [分頁]銀行代碼 -->
            <div class="tab-pane active">
              <div class="vi-container">
                <div class="vi-input-group">
                  <span class="vi-icon vi-icon-base vi-icon-search mr20"></span>
                  <input type="text" placeholder="輸入銀行名稱或代碼數字">
                </div>
                <div class="mt24">
                  <div class="vi-scrollbar-block" data-scroll="熱門">
                    <li class="vi-txt-b500 vi-txt-callout mb12">熱門</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">822 中國信託</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">822 中國信託</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">822 中國信託</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">822 中國信託</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">822 中國信託</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">822 中國信託</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">822 中國信託</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">822 中國信託</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">822 中國信託</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">822 中國信託</li>
                  </div>
                  <div class="vi-scrollbar-block" data-scroll="全部">
                    <li class="vi-txt-b500 vi-txt-callout mb12">全部</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">004 臺灣銀行</li> 
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">005 土地銀行</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">006 合作金庫</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">007 第一銀行</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">008 華南銀行</li>
                  </div>
                  <div class="vi-scrollbar-block" data-scroll="1">
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">104 臺灣銀行</li> 
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">105 土地銀行</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">106 合作金庫</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">107 第一銀行</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">108 華南銀行</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">104 臺灣銀行</li> 
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">105 土地銀行</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">106 合作金庫</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">107 第一銀行</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">108 華南銀行</li>
                  </div>
                  <div class="vi-scrollbar-block" data-scroll="2">
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">204 臺灣銀行</li> 
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">205 土地銀行</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">206 合作金庫</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">207 第一銀行</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">208 華南銀行</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">204 臺灣銀行</li> 
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">205 土地銀行</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">206 合作金庫</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">207 第一銀行</li>
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">208 華南銀行</li>
                  </div>
                  <div class="vi-scrollbar-block" data-scroll="3">
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">300 臺灣銀行</li> 
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">300 土地銀行</li>
                  </div>
                  <div class="vi-scrollbar-block" data-scroll="4">
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">400 臺灣銀行</li> 
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">400 土地銀行</li>
                  </div>
                  <div class="vi-scrollbar-block" data-scroll="5">
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">500 臺灣銀行</li> 
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">500 土地銀行</li>
                  </div>
                  <div class="vi-scrollbar-block" data-scroll="6">
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">600 臺灣銀行</li> 
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">600 土地銀行</li>
                  </div>
                  <div class="vi-scrollbar-block" data-scroll="7">
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">700 臺灣銀行</li> 
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">700 土地銀行</li>
                  </div>
                  <div class="vi-scrollbar-block" data-scroll="8">
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">800 臺灣銀行</li> 
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">800 土地銀行</li>
                  </div>
                  <div class="vi-scrollbar-block" data-scroll="9">
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">900 臺灣銀行</li> 
                    <li class="vi-txt-g500 vi-txt-body-bold mb24">900 土地銀行</li>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane">
              <p>2</p>   
            </div>
            <div class="tab-pane">
                <p>3</p>
            </div>
          </div> 
        </div>
      </div>
    </div>
</div>

<!-- js event demo code, 開發請拉掉 -->
<script>

// scrollbar
const scrollList = document.querySelector('.vi-scrollbar-list');
const scrollListLi = document.querySelectorAll('.vi-scrollbar-list li');
let output = '';
let lastOutput ='';
lastBlockIndex = '';
scrollList.addEventListener('touchmove' , (e) => {
  e.preventDefault();
  let blockIndex = -1;
  let lastItem = null;

  scrollListLi.forEach((item , index)=>{
    //抓取各別 top & bottom
    const rect = item.getBoundingClientRect();
    if(e.touches[0].clientY > rect.top && e.touches[0].clientY < rect.bottom){
      if(lastItem !== item){
        output = item.innerText;
        blockIndex = index;
        lastItem = item;
      }
    }
    //防止觸發跳動
    if(output !== lastOutput){
      lastOutput = output;
    }
    //防止連續觸發抓 offsetTop ，比對當前 index 跟最後的 index 值是否相同
    if (blockIndex !== -1 && blockIndex !== lastBlockIndex){
      const blockList = document.querySelectorAll('[data-scroll]');
      const targetElement = blockList[index];
      const targetOffset = blockList[index].offsetTop;
      //抓取 supercard 內的捲軸範圍
      const superBody = document.querySelector('#target-bankcode-supercard .super-card-body');
      superBody.scrollTo({
        top: targetOffset - 5,
        behavior: "smooth"
      });
      lastBlockIndex = blockIndex;
    }
  })
  //同步數字球體
  const ballNum = document.querySelector('.vi-scrillbar-ball p');
  ballNum.innerText = output;
});
scrollList.addEventListener('touchstart', () => {
  const ball = document.querySelector('.vi-scrillbar-ball');
  setTimeout(() => {
    ball.classList.remove('hide');
  }, 300);
});
scrollList.addEventListener('touchend',()=>{
  const ball = document.querySelector('.vi-scrillbar-ball');
  ball.classList.add('hide');
})

// 我的帳號 demo
document.querySelectorAll('.vi-list-item').forEach((item) => {
  item.addEventListener('click', (e) => {
    e.preventDefault();
    document.querySelector('#trigger-select-account input').classList.add('hide');
    document.querySelector('#trigger-select-account .fake-input').classList.remove('hide');
    document.querySelector('.vi-list-item').classList.add('active');
    document.getElementById('target-account-supercard').classList.remove('vi-modal-in');
    document.getElementById('target-account-supercard').classList.add('hide');
  });
});

// 選擇帳號 demo 
document.getElementById('trigger-select-account').addEventListener('click', function(e) {
  e.preventDefault();
  document.getElementById('target-account-supercard').classList.toggle('hide');
  document.getElementById('target-account-supercard').classList.toggle('vi-modal-in');
});

// 銀行代碼 demo
document.getElementById('target-bankcode').addEventListener('click', function(e) {
  e.preventDefault();
  document.getElementById('target-bankcode-supercard').classList.toggle('hide');
  document.getElementById('target-bankcode-supercard').classList.toggle('vi-modal-in');
  document.querySelector('body').classList.add('noScroll');
});

//銀行代碼分頁對應畫面
const tabItems = document.querySelectorAll('.vi-tab-item');
const tabPanes = document.querySelectorAll('.tab-content .tab-pane');
for (let i = 0; i < tabItems.length; i++) {
  tabItems[i].addEventListener('click', function() {
    // 移除所有tab-pane active
    for (let j = 0; j < tabPanes.length; j++) {
      tabPanes[j].classList.remove('active');
    }
    // 比對取得tab-item index
    const index = Array.prototype.indexOf.call(this.parentNode.children,this);
    // 增加對應的 active
    tabPanes[index].classList.add('active');
  });
}

// scroll fixed header
let scrollObject = {};
window.onscroll = setScrollPosition;
function setScrollPosition(){
  scrollObject = {
    x: window.pageXOffset,
    y: window.pageYOffset
  }
  if (scrollObject.y > 0) {
    document.getElementsByTagName('body')[0].classList.add('vi-page-header-fix');
  } else {
    document.getElementsByTagName('body')[0].classList.remove('vi-page-header-fix');
  }
}

// modal
// modal close demo，關閉時的動態效果依照現行
$('.vi-modal .popup-footer .vi-btn').on('click', function() {
  $(this).closest('.vi-modal').toggleClass('vi-modal-in');
});

// vi-modal demo，打開時的動態效果依照現行
document.getElementById('trigger-exit').addEventListener('click', function(e) {
  e.preventDefault();
  document.getElementById('trigger-exit-modal').classList.toggle('vi-modal-in');
});

//supercard
// 超人卡片 close demo，關閉時的動態效果依照現行
const modalClose = document.getElementsByClassName('vi-modal-close');
for (var i = 0; i < modalClose.length; i++){
  modalClose[i].addEventListener('click', function(e) {
    e.preventDefault();
    this.closest(".vi-modal").classList.toggle('vi-modal-in');
    this.closest(".vi-modal").classList.toggle('hide');
    // 避免銀行代碼捲動時，外部卷軸一起移動
    document.querySelector('body').classList.remove('noScroll');
  });
}

</script>